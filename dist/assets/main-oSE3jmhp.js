(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function c(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(e){if(e.ep)return;e.ep=!0;const s=c(e);fetch(e.href,s)}})();const b=window.AudioContext||window.webkitAudioContext,n=new b,p="/ar-band/",h={guitar:`${p}assets/audios/guitar.wav`,piano:`${p}assets/audios/piano.wav`},d={},a={},g={},l={guitar:!1,piano:!1};let u=null;async function L(t,o){const r=await(await fetch(o)).arrayBuffer(),e=await n.decodeAudioData(r);d[t]=e,g[t]=e.duration}function m(t){const o=n.createBufferSource();o.buffer=d[t],o.loop=!0,o.connect(n.destination);const c=g[t],r=(n.currentTime-u)%c,e=c-r,s=n.currentTime+e;o.start(s),a[t]=o,l[t]=!0;const i=document.getElementById("status-text"),w=performance.now(),x=setInterval(()=>{const v=(performance.now()-w)/1e3,f=Math.max(0,e-v);i.textContent=`${t} startet in ${f.toFixed(1)} Sekundenâ€¦`,f<=0&&(clearInterval(x),i.textContent="")},100);console.log(`[${t}] startet in ${e.toFixed(2)}s`)}function A(t){a[t]&&(a[t].stop(),a[t].disconnect(),a[t]=null),l[t]=!1}function y(t){const o=document.getElementById(`${t}-btn`);o.addEventListener("click",async()=>{console.log(`Button '${t}' clicked`),n.state==="suspended"&&await n.resume(),console.log("AudioContext state:",n.state),u||(u=n.currentTime),d[t]||await L(t,h[t]),l[t]?(A(t),o.classList.remove("active")):(m(t),o.classList.add("active"))})}y("guitar");y("piano");
