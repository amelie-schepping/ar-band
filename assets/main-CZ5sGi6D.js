(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(e){if(e.ep)return;e.ep=!0;const s=n(e);fetch(e.href,s)}})();const y=window.AudioContext||window.webkitAudioContext,r=new y,l="/ar-band/",w={guitar:`${l}assets/audios/guitar.wav`,piano:`${l}assets/audios/piano.wav`},f={},c={},p={},d={guitar:!1,piano:!1};let a=null;async function L(t,o){const i=await(await fetch(o)).arrayBuffer(),e=await r.decodeAudioData(i);f[t]=e,p[t]=e.duration}function b(t){const o=r.createBufferSource();o.buffer=f[t],o.loop=!0,o.connect(r.destination);const n=p[t],i=(r.currentTime-a)%n,e=r.currentTime+(n-i);o.start(e),c[t]=o,d[t]=!0,console.log(`[${t}] playLoop aufgerufen`)}function h(t){c[t]&&(c[t].stop(),c[t].disconnect(),c[t]=null),d[t]=!1}function g(t){const o=document.getElementById(`${t}-btn`);o.addEventListener("click",async()=>{console.log(`Button '${t}' clicked`),r.state==="suspended"&&await r.resume(),console.log("AudioContext state:",r.state),a||(a=r.currentTime),f[t]||await L(t,w[t]),d[t]?(h(t),o.classList.remove("active")):(b(t),o.classList.add("active"))})}g("guitar");g("piano");
